{"ast":null,"code":"var _jsxFileName = \"/Users/kimyeeun/Downloads/Git/react-website-v1/src/components/InputForm.js\";\nimport React, { useState } from 'react';\nimport { Button } from './Button';\nimport axios from 'axios';\n\nfunction InputForm(props) {\n  const [image, setImage] = useState({});\n  const [loaded, setLoaded] = useState(false);\n\n  const SaveImage = props => {\n    e.preventDefault();\n    const fileReader = new FileReader();\n\n    if (e.target.files[0]) {\n      setLoaded(\"loading\");\n      fileReader.readAsDataURL(e.target.files[0]);\n    }\n\n    fileReader.onload = () => {\n      setImage({\n        image_file: e.target.files[0],\n        preview_URL: fileReader.result\n      });\n      setLoaded(true);\n    };\n  };\n\n  const SendImageToServer = async () => {\n    if (image.image_file) {\n      const formData = new FormData();\n      formData.append('file', image.image_file);\n      await axios.post('/api/image/upload', formData);\n      alert(\"그림을 성공적으로 업로드했어요!\");\n      setImage({\n        image_file: \"\",\n        preview_URL: \"img/default_image.png\"\n      });\n      setLoaded(false);\n    } else {\n      alert(\"그림이 업로드되지 않았어요. 다시 시도해주세요!\");\n    }\n  };\n\n  return /*#__PURE__*/React.createElement(\"li\", {\n    className: \"inputform__container\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 45,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputform__input\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(\"input\", {\n    type: \"file\",\n    accept: \"img/*\",\n    onChange: SaveImage,\n    style: {\n      display: \"none\"\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 47,\n      columnNumber: 17\n    }\n  })), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"inputform__button\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 13\n    }\n  }, /*#__PURE__*/React.createElement(Button, {\n    className: \"btns\",\n    type: \"submit\",\n    buttonStyle: \"btn--primary\",\n    buttonSize: \"btn--large\",\n    onClick: SendImageToServer,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 17\n    }\n  }, \" \\uBC00\\uC5B4\\uC11C \\uC7A0\\uAE08\\uD574\\uC81C\")));\n}\n\nexport default InputForm;","map":{"version":3,"names":["React","useState","Button","axios","InputForm","props","image","setImage","loaded","setLoaded","SaveImage","e","preventDefault","fileReader","FileReader","target","files","readAsDataURL","onload","image_file","preview_URL","result","SendImageToServer","formData","FormData","append","post","alert","display"],"sources":["/Users/kimyeeun/Downloads/Git/react-website-v1/src/components/InputForm.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { Button } from './Button';\nimport axios from 'axios';\n\nfunction InputForm(props) \n{\n    const [image, setImage] = useState({});\n    const [loaded, setLoaded] = useState(false);\n    \n    const SaveImage = (props) => {\n        e.preventDefault();\n        const fileReader = new FileReader();\n    \n        if(e.target.files[0]){\n            setLoaded(\"loading\")\n            fileReader.readAsDataURL(e.target.files[0])\n        }\n        fileReader.onload = () => {\n        setImage({\n          image_file: e.target.files[0],\n          preview_URL: fileReader.result\n        })\n        setLoaded(true);\n    }\n    }\n    const SendImageToServer = async() => {\n        if(image.image_file) {\n            const formData = new FormData()\n            formData.append('file', image.image_file);\n\n            await axios.post('/api/image/upload', formData);\n            alert(\"그림을 성공적으로 업로드했어요!\");\n\n            setImage({\n              image_file: \"\",\n              preview_URL: \"img/default_image.png\",\n            });\n            setLoaded(false);\n        }\n        else {\n            alert(\"그림이 업로드되지 않았어요. 다시 시도해주세요!\");\n        }\n    }\n    return (\n        <li className='inputform__container'>\n            <div className='inputform__input'>\n                <input type='file' \n                    accept='img/*' \n                    onChange={SaveImage}\n                    style={{ display: \"none\" }}\n                />\n            </div>\n            <div className='inputform__button'>\n                <Button className='btns'\n                    type='submit'\n                    buttonStyle='btn--primary'\n                    buttonSize='btn--large'\n                    onClick={SendImageToServer}\n                > 밀어서 잠금해제\n                </Button> \n            </div>\n        </li>\n    );\n}\n\nexport default InputForm;"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,QAAhB,QAAgC,OAAhC;AACA,SAASC,MAAT,QAAuB,UAAvB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,SAASC,SAAT,CAAmBC,KAAnB,EACA;EACI,MAAM,CAACC,KAAD,EAAQC,QAAR,IAAoBN,QAAQ,CAAC,EAAD,CAAlC;EACA,MAAM,CAACO,MAAD,EAASC,SAAT,IAAsBR,QAAQ,CAAC,KAAD,CAApC;;EAEA,MAAMS,SAAS,GAAIL,KAAD,IAAW;IACzBM,CAAC,CAACC,cAAF;IACA,MAAMC,UAAU,GAAG,IAAIC,UAAJ,EAAnB;;IAEA,IAAGH,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CAAH,EAAqB;MACjBP,SAAS,CAAC,SAAD,CAAT;MACAI,UAAU,CAACI,aAAX,CAAyBN,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CAAzB;IACH;;IACDH,UAAU,CAACK,MAAX,GAAoB,MAAM;MAC1BX,QAAQ,CAAC;QACPY,UAAU,EAAER,CAAC,CAACI,MAAF,CAASC,KAAT,CAAe,CAAf,CADL;QAEPI,WAAW,EAAEP,UAAU,CAACQ;MAFjB,CAAD,CAAR;MAIAZ,SAAS,CAAC,IAAD,CAAT;IACH,CANG;EAOH,CAfD;;EAgBA,MAAMa,iBAAiB,GAAG,YAAW;IACjC,IAAGhB,KAAK,CAACa,UAAT,EAAqB;MACjB,MAAMI,QAAQ,GAAG,IAAIC,QAAJ,EAAjB;MACAD,QAAQ,CAACE,MAAT,CAAgB,MAAhB,EAAwBnB,KAAK,CAACa,UAA9B;MAEA,MAAMhB,KAAK,CAACuB,IAAN,CAAW,mBAAX,EAAgCH,QAAhC,CAAN;MACAI,KAAK,CAAC,mBAAD,CAAL;MAEApB,QAAQ,CAAC;QACPY,UAAU,EAAE,EADL;QAEPC,WAAW,EAAE;MAFN,CAAD,CAAR;MAIAX,SAAS,CAAC,KAAD,CAAT;IACH,CAZD,MAaK;MACDkB,KAAK,CAAC,4BAAD,CAAL;IACH;EACJ,CAjBD;;EAkBA,oBACI;IAAI,SAAS,EAAC,sBAAd;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAK,SAAS,EAAC,kBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI;IAAO,IAAI,EAAC,MAAZ;IACI,MAAM,EAAC,OADX;IAEI,QAAQ,EAAEjB,SAFd;IAGI,KAAK,EAAE;MAAEkB,OAAO,EAAE;IAAX,CAHX;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,EADJ,CADJ,eAQI;IAAK,SAAS,EAAC,mBAAf;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,gBACI,oBAAC,MAAD;IAAQ,SAAS,EAAC,MAAlB;IACI,IAAI,EAAC,QADT;IAEI,WAAW,EAAC,cAFhB;IAGI,UAAU,EAAC,YAHf;IAII,OAAO,EAAEN,iBAJb;IAAA;IAAA;MAAA;MAAA;MAAA;IAAA;EAAA,kDADJ,CARJ,CADJ;AAoBH;;AAED,eAAelB,SAAf"},"metadata":{},"sourceType":"module"}